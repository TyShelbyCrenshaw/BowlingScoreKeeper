@inject Game CurrentGame
@implements IDisposable

<div class="game-card">
@* 	If I was to keep working on this project I could add these
	<div class="container">
		<div class="row justify-content-between">
			<div class="col">
				player icon
			</div>
			<div class="col text-end">
				trash
			</div>
		</div>
	</div> *@
	<div class="game">
		<div class="row text-center" style="height: 50px;">
			<div class="border col">1</div>
			<div class="border col">2</div>
			<div class="border col">3</div>
			<div class="border col">4</div>
			<div class="border col">5</div>
			<div class="border col">6</div>
			<div class="border col">7</div>
			<div class="border col">8</div>
			<div class="border col">9</div>
			<div class="border col">10</div>
			@* <div class="border col">Max Possible</div> *@
		</div>
		<div class="row" style="height: 50px;">
			@for (var i = 0; i < 10; i++)
			{
				var frame = CurrentGame.Frames[i];
				if (i < 9)
				{
					<GameCardFrame
						FrameIndex="@(i+1)"
						FirstRoll="@frame.FirstRoll"
						SecondRoll="@frame.SecondRoll"
						GameScoreUpToCurrentFrame="@frame.Score"
						LastFrame="false"/>
				}
				else
				{
					<GameCardFrame 
						FrameIndex="@(i+1)"
						FirstRoll="@frame.FirstRoll"
						SecondRoll="@frame.SecondRoll"
						ThirdRoll="@frame.ThirdRoll"
						GameScoreUpToCurrentFrame="@frame.Score"
						LastFrame="true" />
				}
			}

			@*This would be fun to figure out if I had more time
			<div class="col border text-center align-content-center">
				this should be what the current score is plus the score if we hit every pin for the rest of the game
				@CurrentGame.CurrentGameMaxPossible
			</div> *@
		</div>
	</div>
</div>

@code {
	protected override void OnInitialized()
	{
		CurrentGame.OnStateChanged += StateHasChanged;
	}

	public void Dispose()
	{
		CurrentGame.OnStateChanged -= StateHasChanged;
	}
}
